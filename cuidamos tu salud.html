<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Cuidamos tu salud</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
        emailjs.init('Whq48d5qhVZIJgomj');
    </script>
</head>
<body>
    <main class="container mt-5">
        <h2 class="text-center text-primary mb-4"><i class="fa-solid fa-stethoscope me-2"></i>¡Cuidamos tu salud te da la bienvenida!</h2>

        <form id="formulario-cita">
            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre completo</label>
                <input type="text" class="form-control" id="nombre" required pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ ]{2,100}" title="Solo letras y espacios. Mínimo 2 caracteres">
            </div>
            <div class="mb-3">
                <label for="telefono" class="form-label">Teléfono</label>
                <input type="tel" class="form-control" id="telefono" required pattern="[0-9]{10}" maxlength="10" title="El número debe tener exactamente 10 dígitos">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Correo electrónico</label>
                <input type="email" class="form-control" id="email" required pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$" title="Ingresa un correo electrónico válido">
            </div>
            <div class="mb-3">
                <label for="fecha" class="form-label">Fecha</label>
                <input type="date" class="form-control" id="fecha" required>
            </div>
            <div class="mb-3">
                <label for="hora" class="form-label">Hora</label>
                <input type="time" class="form-control" id="hora" required>
            </div>
            <div class="mb-3">
                <label for="especialidad" class="form-label">Especialidad</label>
                <select id="especialidad" class="form-select" required>
                    <option value="">Seleccione una especialidad</option>
                    <option>Medicina general</option>
                    <option>Ginecología</option>
                    <option>Obstetricia</option>
                    <option>Salud Mental</option>
                    <option>Pediatría</option>
                    <option>Otro</option>
                </select>
            </div>
            <div class="d-grid">
                <button type="submit" class="btn btn-primary">Guardar Cita</button>
            </div>
        </form>

        <section class="mt-5">
            <h4>Citas Agendadas</h4>
            <ul id="lista-citas" class="list-group mt-3"></ul>
        </section>
    </main>

    <script>
        const formulario = document.getElementById('formulario-cita');
        const listaCitas = document.getElementById('lista-citas');
        let citas = [];

        function renderCitas() {
            listaCitas.innerHTML = '';
            citas.forEach((cita, index) => {
                const li = document.createElement('li');
                li.className = 'list-group-item';
                li.textContent = `${cita.nombre} - ${cita.telefono} - ${cita.email} - ${cita.fecha} ${cita.hora} - ${cita.especialidad}`;
                listaCitas.appendChild(li);
            });
        }

        formulario.addEventListener('submit', function (e) {
            e.preventDefault();
            const cita = {
                nombre: document.getElementById('nombre').value,
                telefono: document.getElementById('telefono').value,
                email: document.getElementById('email').value,
                fecha: document.getElementById('fecha').value,
                hora: document.getElementById('hora').value,
                especialidad: document.getElementById('especialidad').value
            };
            citas.push(cita);
            renderCitas();
            formulario.reset();
            emailjs.send('service_fx55wxl', 'template_1jtbteb', {
                nombre: cita.nombre,
                email: cita.email,
                telefono: cita.telefono,
                fecha: cita.fecha,
                hora: cita.hora,
                especialidad: cita.especialidad,
                to_admin: 'dajecapo@hotmail.com'
            });
        });
    </script>
</body>
</html>
